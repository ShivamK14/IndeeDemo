pipeline{
  agent any
  stages{
    stage("test"){
      steps{
          sh '''find . -type d -name "__pycache__" -exec rm -r {} +
                find . -type f -name "*.pyc" -delete
                cd tests
                pytest ./test_jenkins.py -s -v
                '''
      }
      post{
        failure{
          echo "test Failed ! stoping build process"
          error "test did not passed"
        }
      }
    }
    stage("build"){
      steps{
        echo "we are building here"
      }
    }

  
}


post {
  success {
    echo "pipeline build successfully"

  }
  failure{
    echo "pipeline Failed"
  }
}
}